(this["webpackJsonpcountry-client"]=this["webpackJsonpcountry-client"]||[]).push([[0],{149:function(e,t,n){e.exports=n(277)},154:function(e,t,n){},155:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},156:function(e,t,n){},277:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(5),c=n.n(r),s=(n(154),n(155),n(156),n(89)),i=n(115),l=n(116),u=n(145),d=n(148),m=(n(157),n(281)),p=n(282),f=n(280),h=n(39),g=n(283),y=n(284),S=n(117),v=n.n(S),E={processStream:function(e){var t=new Headers;t=t.delete("Content-Type");fetch("https://countrytestapi.herokuapp.com/process",{method:"post",body:e,headers:t}).then((function(e){return v()(e.body)})).then((function(e){e.getReader().read().then((function(t){t.done||(console.log(t.value),e.getReader().read().then(t))}))}))},process:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=new Headers;t=t.delete("Content-Type");return fetch("https://countrytestapi.herokuapp.com/process",{method:"post",body:e,headers:{}}).then((function(e){console.log("done")}))})),getCountryInfo:function(){return fetch("https://countrytestapi.herokuapp.com/getAllCountyInfo").then((function(e){return e.json()}))},delteAll:function(){return fetch("https://countrytestapi.herokuapp.com/deleteAll")}},k=(n(159),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(i.a)(this,n),(o=t.call(this,e)).state={loading:!1,error:!1,deletePressed:!1,file:"",data:[]},o.columns=[{title:"Zip Name",dataIndex:"zipFileName",key:"zipFileName",render:function(e){return a.a.createElement("a",null,e)}},{title:"Extracted Name",dataIndex:"extractedFileName",key:"extractedFileName"},{title:"File Contnet",dataIndex:"fileContent",key:"fileContent"},{title:"Country",dataIndex:"countryName",key:"countryName"},{title:"Status",key:"status",dataIndex:"status",render:function(e){var t="red";return"SUCCESS"==e&&(t="green"),a.a.createElement(m.a,{color:t,key:e}," ",e," ")}},{title:"Date",dataIndex:"date",key:"date"}],o.onSubmitProcess=function(e){0==o.state.loading&&(o.setState({loading:!0}),console.log(e),E.process(e).then((function(e){o.setState({loading:!1}),console.log("response ",e),"Processed"==e.message?o.setState({error:!1}):o.setState({error:!0})})))},o.fetch=function(){o.evtSource.onmessage=function(e){console.log(JSON.parse(e.data))}},o.onFormSubmit=function(e){e.preventDefault();var t=new FormData;t.append("file",o.state.file),o.setState({loading:!0}),E.process(t).then((function(e){o.setState({loading:!1})}))},o.onChange=function(e){o.setState({file:e.target.files[0]})},o.onDelete=function(){o.setState({deletePressed:!0}),E.delteAll().then((function(e){o.setState({deletePressed:!1}),console.log("delete",o.state.deletePressed)}))},o.onFinish=function(e){console.log("Received values of form: ",e)},o.fetchCont=function(){};return o.evtSource=new EventSource("https://countrytestapi.herokuapp.com/findAll"),o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.evtSource.onmessage=function(t){e.setState({data:[].concat(Object(s.a)(e.state.data),[JSON.parse(t.data)])}),console.log(t.data)}}},{key:"startEventSource",value:function(){var e=this;this.eventSource=new EventSource("https://countrytestapi.herokuapp.com/findAll"),this.eventSource.onmessage=function(t){e.setState({data:[].concat(Object(s.a)(e.state.data),[JSON.parse(t.data)])}),console.log(t.data)}}},{key:"render",value:function(){console.log("re-rendering");var e=a.a.createElement("div",null);return e=1==this.state.error?a.a.createElement(p.a,{message:"Sorry! something went wrong",type:"error"}):a.a.createElement(f.a,{columns:this.columns,dataSource:this.state.data}),a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.onFormSubmit},a.a.createElement("h1",null,"Country Process"),a.a.createElement("input",{type:"file",name:"myImage",onChange:this.onChange}),a.a.createElement("button",{type:"submit"},"Process")),"   ",a.a.createElement(h.a,{onClick:this.onDelete,style:{marginTop:"20px",marginRight:"2px"}}," ",a.a.createElement(g.a,{twoToneColor:"#eb2f96"})," "),a.a.createElement("div",{style:{marginTop:"20px"}},a.a.createElement("br",null),1==this.state.loading?a.a.createElement(y.a,{style:{fontSize:"48px",color:"#08c"}}):e))}}]),n}(a.a.Component));var b=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[149,1,2]]]);
//# sourceMappingURL=main.96ae4c08.chunk.js.map